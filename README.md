# Документация проекта Rev App

## Описание

Rev App - это Flutter приложение для мониторинга активности во фракциях игры Revelation Online. Приложение позволяет отслеживать прогресс по каждой фракции и рассчитывать время до достижения цели.

## Структура документации

1. **[documentation/ARCHITECTURE.md](documentation/ARCHITECTURE.md)** - Описание архитектуры приложения
   - Слои архитектуры (Domain, Data, Presentation, Core)
   - Поток данных
   - Принципы проектирования

2. **[documentation/STRUCTURE.md](documentation/STRUCTURE.md)** - Структура проекта
   - Организация файлов и папок
   - Описание основных компонентов
   - Расположение кода

3. **[documentation/DATABASE.md](documentation/DATABASE.md)** - Схема базы данных
   - Описание таблиц
   - SQL запросы создания
   - Расположение БД

4. **[documentation/USAGE.md](documentation/USAGE.md)** - Руководство пользователя
   - Начало работы
   - Работа с фракциями
   - Расчет времени до цели
   - Советы по использованию

5. **[documentation/API.md](documentation/API.md)** - API документация
   - Domain Layer API
   - Use Cases
   - Entities
   - Presentation Layer API
   - Utils API

6. **[documentation/UI_DESIGN.md](documentation/UI_DESIGN.md)** - Дизайн пользовательского интерфейса
   - Цветовая схема
   - Компоненты UI
   - Типографика
   - Иконки и визуальные элементы

## Быстрый старт

### Установка зависимостей

```bash
flutter pub get
```

### Запуск приложения

```bash
flutter run
```

### Анализ кода

```bash
flutter analyze
```

## Основные возможности

- ✅ Управление фракциями (выбор из статического списка, редактирование, скрытие свайпом)
- ✅ Изменение порядка фракций (drag-and-drop с оптимистичным обновлением)
- ✅ Отслеживание ежедневных активностей (заказы и работы)
- ✅ Управление сертификатами (указание наличия сертификата и настройка цели по сертификату)
- ✅ Автоматический сброс отметок в 0:00 МСК
- ✅ Расчет времени до достижения цели по валюте и репутации (отображается в карточке фракции, автоматически обновляется при изменении активностей)
- ✅ Отслеживание опыта и уровней отношения к фракциям с progress bar
- ✅ Отслеживание прогресса по украшениям (уважение, почтение, преклонение)
- ✅ Указание наличия заказов, работ и сертификатов во фракции (настраивается для каждой фракции)
- ✅ Настройка работы через поля ввода (валюта/день и опыт/день) на странице редактирования фракции
- ✅ Редактирование валюты фракции через диалог из карточки
- ✅ Обновление списка через pull-to-refresh
- ✅ Оптимистичные обновления UI (мгновенный отклик)
- ✅ Локальное хранение данных (SQLite)
- ✅ Темная тема в стиле игры Revelation Online
- ✅ Современный и интуитивный UI
- ✅ Навигация через Drawer
- ✅ Страница редактирования фракции с нижней навигацией (вкладки "Настройки" и "Инвентарь")
- ✅ Настройка целей (целевой уровень репутации и нужность сертификата)
- ✅ Умная фильтрация целевых уровней (только уровни выше текущего)
- ✅ Автоматическое переключение целевого уровня при изменении текущего
- ✅ Иконки помощи во всех блоках (Ежедневные активности, Цели, Валюта, Репутация, Сертификат, Украшения)
- ✅ Переиспользуемый компонент HelpDialog для единообразных модалок помощи

## Технологии

- **Flutter** - фреймворк для разработки
- **Clean Architecture** - архитектурный паттерн
- **BLoC** - управление состоянием
- **SQLite** - локальная база данных
- **sqflite** - Flutter пакет для работы с SQLite

## Структура проекта

```
lib/
├── core/          # Ядро приложения (DI, утилиты)
├── domain/        # Доменный слой (entities, use cases)
├── data/          # Слой данных (DAO, репозитории)
└── presentation/  # Слой представления (UI, BLoC)
    ├── bloc/      # State Management (BLoC)
    ├── pages/     # Страницы (организованы по функциональности)
    │   ├── faction/
    │   ├── main/
    │   └── map/
    └── widgets/   # Виджеты (организованы по функциональности)
        ├── activity/
        ├── common/      # Переиспользуемые виджеты
        ├── currency/
        ├── faction/
        ├── reputation/
        └── time_to_goal/
```

## Зависимости

Основные зависимости:
- `sqflite` - работа с SQLite
- `flutter_bloc` - управление состоянием
- `equatable` - сравнение объектов
- `intl` - форматирование
- `timezone` - работа с часовыми поясами
- `shared_preferences` - хранение простых данных

## Разработка

### Добавление новой функциональности

1. Определите, к какому слою относится функциональность
2. Создайте entity в domain/entities (если нужна новая сущность)
3. Создайте use case в domain/usecases
4. Реализуйте repository в data/repositories
5. Создайте BLoC в presentation/bloc (если нужен)
6. Создайте UI в presentation/pages или presentation/widgets

### Тестирование

В будущем планируется добавление unit и integration тестов.

## Лицензия

Проект создан для личного использования.

## Контакты

Если возникли вопросы по документации или коду, обращайтесь к разработчику.
