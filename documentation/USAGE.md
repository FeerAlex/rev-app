# Руководство пользователя

## Начало работы

### Первый запуск

1. При первом запуске приложения автоматически создается база данных с настройками по умолчанию
2. Значения по умолчанию уже установлены, но их можно изменить при необходимости

### Настройка приложения

При первом запуске приложения устанавливаются следующие значения по умолчанию:

- **Цена 1 итемки:** 1788
- **Количество итемок для улучшения:**
  - Уважение: 3
  - Почтение: 4
  - Преклонение: 6
- **Стоимость украшений:**
  - Уважение: 7888
  - Почтение: 9888
  - Преклонение: 15888
- **Валюта за заказ:** 1000
- **Стоимость сертификата:** 7888

Для изменения настроек:

1. Откройте вкладку **"Настройки"** в нижней панели навигации
2. Измените необходимые поля
3. Нажмите **"Сохранить настройки"**

## Работа с фракциями

### Добавление новой фракции

1. Откройте вкладку **"Фракции"**
2. Нажмите на кнопку **"+"** в правом нижнем углу
3. Заполните форму:
   - **Название фракции** - введите название
   - **Уровень репутации** - выберите текущий уровень
   - **Заказы** - отметьте, если во фракции есть заказы
   - **Сертификат** - отметьте, если во фракции есть сертификат
   - Отметьте купленные/улучшенные украшения
4. Нажмите **"Сохранить"**

**Примечание:** Валюту и валюту с работы можно указать позже, нажав на соответствующие элементы в карточке фракции.

### Редактирование фракции

1. Откройте вкладку **"Фракции"**
2. Нажмите на карточку нужной фракции
3. Измените необходимые параметры
4. Нажмите **"Сохранить"**

### Удаление фракции

**Способ 1: Свайп**
1. Откройте список фракций
2. Смахните карточку фракции влево
3. Подтвердите удаление в диалоге

### Изменение порядка фракций

1. Откройте список фракций
2. Зажмите карточку фракции и перетащите её на новую позицию
3. Порядок автоматически сохранится в базе данных

**Примечание:** Порядок сохраняется между сеансами приложения.

### Обновление списка фракций

Список фракций можно обновить вручную:

1. Откройте список фракций
2. Потяните список вниз (свайп вниз)
3. Список автоматически перезагрузится из базы данных

**Примечание:** Изменения отображаются мгновенно благодаря оптимистичным обновлениям. При обновлении фракции или изменении порядка UI обновляется сразу, сохранение в БД происходит в фоне.

### Ежедневные активности

Каждый день в 0:00 по московскому времени отметки о выполнении заказов автоматически сбрасываются.

Вы можете вручную отметить выполнение:
- **Заказ выполнен** - нажмите на бейдж "Заказ" в карточке фракции
- **Сертификат куплен** - нажмите на иконку сертификата справа от валюты в карточке фракции

## Расчет времени до цели

### Что такое цель?

Главная цель фракции - **купить сертификат**. Для этого необходимо:
1. Купить все три украшения (Уважение, Почтение, Преклонение)
2. Улучшить все три украшения
3. Купить сертификат

### Как работает расчет?

Виджет **"Время до цели"** автоматически рассчитывает, сколько времени осталось до достижения цели. Отображается в компактном виде прямо в карточке фракции в формате "X д Y ч Z м":

1. Рассчитывается общая стоимость всех некупленных украшений и улучшений
2. Добавляется стоимость сертификата (если он еще не куплен)
3. Вычитается текущее количество валюты
4. Рассчитывается потенциальный доход в день (независимо от отметок выполнения):
   - Валюта за заказ (если во фракции есть заказы и настроена валюта за заказ)
   - Валюта с работы (если указана)
5. Вычисляется время: `(нужная валюта) / (валюта в день)`

### Когда расчет недоступен?

Расчет не будет показан, если:
- Нет дохода в день (во фракции нет заказов и не указана работа)
- Не настроены параметры в общих настройках

## Уровни репутации

Репутация делится на 6 уровней (от слабой к сильной):

1. **Равнодушие** - начальный уровень
2. **Дружелюбие**
3. **Уважение** - можно купить первое украшение
4. **Почтение** - можно купить второе украшение
5. **Преклонение** - можно купить третье украшение
6. **Обожествление** - максимальный уровень

## Украшения

В каждой фракции можно купить три украшения:

1. **Уважение** - требует уровень репутации "Уважение"
2. **Почтение** - требует уровень репутации "Почтение"
3. **Преклонение** - требует уровень репутации "Преклонение"

Каждое украшение можно:
- **Купить** - за валюту фракции
- **Улучшить** - за итемки (количество настраивается в общих настройках)

## Сертификат

Сертификат можно купить только после того, как:
1. Куплены все три украшения
2. Улучшены все три украшения

Если во фракции нет сертификата, отметьте это соответствующим чекбоксом.

## Навигация

Приложение использует двухуровневую навигацию:

**Уровень 1: Drawer (боковое меню)**
- Открывается по нажатию на кнопку меню (burger) в AppBar
- Содержит два раздела:
  1. **Фракции** - открывает страницу фракций
  2. **Карта** - открывает страницу карты (заглушка)

**Уровень 2: BottomNavigationBar (на странице фракций)**
- Отображается только на странице фракций
- Содержит две вкладки:
  1. **Список** - список всех фракций с кнопкой добавления
  2. **Настройки** - общие настройки приложения

### Редактирование валюты

Валюту можно редактировать прямо из карточки фракции:

1. **Валюта фракции** - нажмите на отображение валюты справа от названия фракции
2. **Валюта с работы** - нажмите на бейдж "Работа" или значение валюты в списке активностей

Откроется диалог для ввода нового значения. При открытии диалога весь текст автоматически выделяется для быстрой замены.

## Советы

1. **Регулярно обновляйте валюту** - нажимайте на валюту в карточке фракции для быстрого обновления
2. **Отмечайте активности** - отмечайте выполнение заказов и покупку сертификата, нажимая на бейджи/иконки в карточке фракции
3. **Указывайте наличие заказов** - если во фракции нет заказов, снимите соответствующую галочку в настройках фракции
4. **Проверьте настройки** - при первом запуске устанавливаются значения по умолчанию, их можно изменить при необходимости в разделе "Настройки"
5. **Проверяйте время до цели** - время до цели отображается прямо в карточке фракции для быстрого обзора
6. **Удаление свайпом** - для быстрого удаления фракции используйте свайп по карточке
7. **Изменение порядка** - перетаскивайте карточки для изменения порядка отображения фракций
8. **Валюта с работы** - указывайте валюту с работы для более точного расчета времени до цели
9. **Обновление списка** - потяните список вниз для обновления данных из базы
10. **Мгновенные обновления** - изменения отображаются мгновенно, сохранение происходит автоматически в фоне

