# Дизайн пользовательского интерфейса

## Обзор

Приложение использует темную тему, стилизованную под игру Revelation Online. Дизайн основан на скриншотах из игры и включает цветные индикаторы для уровней репутации, темные фоны и современные UI элементы.

## Цветовая схема

### Основные цвета

- **Темный фон:** `#1A1A1A` - основной фон приложения
- **Очень темный фон:** `#0F0F0F` - фон для AppBar и BottomNavigationBar
- **Фон карточек:** `#2A2A2A` - фон для карточек и полей ввода
- **Основной текст:** `#FFFFFF` - белый цвет для основного текста
- **Вторичный текст:** `#B0B0B0` - серый цвет для вторичного текста
- **Акцентный оранжевый:** `#FF6B35` - для кнопок и акцентов
- **Акцентный синий:** `#4A90E2` - для вторичных акцентов

### Цвета уровней репутации

Каждый уровень репутации имеет свой уникальный цвет, используемый для визуального отображения:

| Уровень | Цвет | Hex код | Описание |
|---------|------|----------|----------|
| Равнодушие | Бледно-коричневый | `#A1887F` | Начальный уровень |
| Дружелюбие | Темно-зеленый | `#388E3C` | Второй уровень |
| Уважение | Зеленый | `#4CAF50` | Средний уровень |
| Почтение | Бирюзовый | `#26A69A` | Светло-зеленый |
| Преклонение | Синий | `#2196F3` | Высокий уровень |
| Обожествление | Фиолетовый | `#9C27B0` | Максимальный уровень |

## Компоненты UI

### Карточки фракций

Карточки фракций (`FactionCard`) имеют следующие особенности:

- **Цветная полоса слева** - соответствует уровню репутации (ширина 6px)
- **Скругленные углы** - радиус 12px
- **Темный фон** - цвет карточки `#2A2A2A`
- **Модульная структура** - состоит из переиспользуемых компонентов
- **Бейджи** - для отображения статуса активностей
- **Иконки** - для валюты и активностей
- **Hover эффект** - при наведении (InkWell)

**Структура карточки:**
```
┌─────────────────────────────────────┐
│ [Цветная полоса] Название   Валюта: 1000 │
│              [Заказ] [Работа]   Время: 2 д 5 ч │
└─────────────────────────────────────┘
```

**Компоненты карточки:**
- `FactionNameDisplay` - отображение названия фракции
- `FactionCurrencyDisplay` - отображение валюты с иконкой (кликабельно для редактирования)
- `FactionActivitiesList` - список активностей с бейджами (Заказ, Работа)
- `ActivityBadge` - отдельный бейдж активности (переиспользуемый)
- `WorkCurrencyBadge` - бейдж валюты с работы (кликабельно для редактирования)
- `TimeToGoalWidget` - компактное отображение времени до цели в формате "X д Y ч Z м"

### Страница деталей фракции

Страница редактирования фракции оптимизирована и включает:

- **Компактные секции** - три основные секции: Основная информация, Активности и сертификат, Украшения
- **Горизонтальные чекбоксы** - для активностей и сертификата в одной строке
- **Компактные карточки украшений** - только чекбоксы "Куплено" и "Улучшено" без лишнего текста
- **Цветные границы** - для карточек украшений, соответствующие типу украшения
- **Удаление фракции** - кнопка удаления в AppBar

**Примечание:** Валюту и валюту с работы можно редактировать прямо из карточки фракции, поэтому они не отображаются на странице редактирования.

**Цвета для украшений:**
- Уважение: зеленый (`#4CAF50`)
- Почтение: бирюзовый (`#26A69A`)
- Преклонение: синий (`#2196F3`)

### Виджет времени до цели

Компактный виджет отображения времени до достижения цели в карточке фракции. Имеет состояния:

1. **Загрузка** - индикатор загрузки (только при первой загрузке)
2. **Расчет** - отображение времени в компактном формате (например, "2 д 5 ч 30 м")
3. **Достигнуто** - отображение "Цель достигнута" с зеленой галочкой
4. **Нет данных** - сообщение "Нет данных"

**Особенности:**
- **Оптимистичное обновление** - при пересчете показывает предыдущее значение, индикатор загрузки не показывается
- **Пересчет только при изменении** - пересчитывается только при изменении важных полей фракции (currency, orderCompleted, certificatePurchased)
- Использует `FittedBox` с `BoxFit.scaleDown` для предотвращения переполнения текста

### Поля ввода

Все поля ввода имеют:
- Темный фон (`#2A2A2A`)
- Серую границу в обычном состоянии
- Оранжевую границу при фокусе (2px)
- Скругленные углы (8px)

### Кнопки

- **ElevatedButton** - оранжевый фон, белый текст
- **FloatingActionButton** - оранжевый фон, иконка добавления
- Скругленные углы (8px)
- Padding: 24px горизонтально, 12px вертикально

### Навигация

**Drawer (боковое меню):**
- Темный фон (`#2A2A2A`)
- Заголовок с названием приложения
- Пункты меню: Фракции, Карта
- Выделение текущего раздела

**Страница фракций:**
- Отображает список всех фракций
- Имеет FloatingActionButton для добавления новой фракции

## Типографика

### Размеры шрифтов

- **Заголовки секций:** 18px, жирный
- **Названия фракций:** 18px, жирный
- **Основной текст:** 14-16px, обычный
- **Вторичный текст:** 12-14px, серый
- **Бейджи:** 12px, полужирный

### Стили текста

- Основной текст: белый (`#FFFFFF`)
- Вторичный текст: серый (`#B0B0B0`)
- Акцентный текст: цвет уровня репутации
- Успешные действия: зеленый
- Предупреждения: оранжевый

## Иконки

Приложение использует Material Icons с следующими назначениями:

- `Icons.group` - фракции
- `Icons.map` - карта
- `Icons.add` - добавление
- `Icons.delete` - удаление
- `Icons.monetization_on` - валюта
- `Icons.today` - ежедневные активности
- `Icons.star` - украшения
- `Icons.verified` - сертификат
- `Icons.access_time` - время до цели
- `Icons.check_circle` - достижение цели
- `Icons.shopping_cart` - заказ
- `Icons.menu` - меню (burger)
- `Icons.list` - список
- `Icons.verified` - сертификат
- `Icons.monetization_on` - валюта

## Удаление фракций

Фракции можно удалять свайпом влево:

- **Подтверждение** - перед удалением показывается компактный диалог подтверждения
- **Красный фон** - при свайпе показывается красный фон с иконкой удаления
- **Скругленные углы** - фон удаления имеет скругленные углы, соответствующие карточке
- **Упрощенный диалог** - диалог имеет минимальные отступы и упрощенный текст

## Изменение порядка фракций

Фракции можно переупорядочивать через drag-and-drop:

- **Перетаскивание** - зажмите карточку и перетащите на новую позицию
- **Прозрачный фон** - при перетаскивании фон элемента не меняется (через `proxyDecorator`)
- **Оптимистичное обновление** - UI обновляется мгновенно, затем синхронизируется с БД
- **Автосохранение** - порядок автоматически сохраняется в базе данных

## Обновление списка

Список фракций можно обновить через pull-to-refresh:

- **Свайп вниз** - потяните список вниз для обновления
- **Индикатор обновления** - показывается стандартный индикатор Flutter
- **Автоматическое обновление** - список перезагружается из базы данных

## Оптимистичные обновления

Приложение использует оптимистичные обновления для улучшения UX:

- **Обновление фракции** (`UpdateFactionEvent`) - изменения отображаются мгновенно, сохранение в БД происходит в фоне
- **Изменение порядка** (`ReorderFactionsEvent`) - порядок обновляется мгновенно, сохранение в БД происходит в фоне
- **Восстановление при ошибке** - при ошибке сохранения состояние автоматически восстанавливается из БД
- **Виджет времени** (`TimeToGoalWidget`) - показывает предыдущее значение при пересчете, индикатор загрузки только при первой загрузке

## Адаптивность

Приложение разработано с учетом адаптивности:

- Карточки имеют отступы 16px по горизонтали
- Вертикальные отступы между элементами: 8-24px
- Скругления углов: 8-12px
- Минимальные размеры для касаний: 48x48px

## Анимации

- Плавные переходы при навигации
- Hover эффекты на интерактивных элементах
- Анимация появления карточек в списке
- Плавное изменение состояния чекбоксов

## Доступность

- Высокий контраст текста на фоне
- Четкие границы интерактивных элементов
- Иконки с текстовыми подписями
- Достаточные размеры для касаний




